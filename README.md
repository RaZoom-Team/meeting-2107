# Знакмоства 2107

![image](https://github.com/user-attachments/assets/8b00b471-8251-4967-864a-5c6d6598bc94)<br>
**Telegram Web App** для поиска пары на вальс (и не только) для старшеклассников **ГБОУ Школа 2107**

## Настройка

Переименуйте `.env.example` в `.env` и обновите в нём следующие значения:
- **DB_HOST**, **DB_PORT**, **DB_USER**, **DB_PASSWORD**, **DB_NAME** замените на свои значения подключения базе данных или поставьте на стандартные (например postgres, postgres, postgres), потому что порты БД не выведены в сеть и остаются внутри закрытой докер сети.
- **TG_TOKEN** - токен вашего ТГ бота
- **TG_ADMIN_CHAT** - ID закрытого админ-чата формата `-100XXXXXXXXXX`
- Поля, которые при необходимости можно удалить из  .env
    - **TG_CHANNEL_ID** - ID канала, подписка на который необходима для использования формата `-100XXXXXXXXXX`
    - **TG_CHANNEL_LINK** - ссылка на канал формата `t.me/channel`
- **API_URL** - Итоговый URL API сервиса *(https://example.com/api)*
- **ROOT_PATH** - Коренной путь для API, используемый после проксирования *(в случае если архитектура изменяться не будет, оставить на текущее)*
- **LOKI_URL** - на данный момент не используется
- **RABBIT_URL** - путь до RabbitMQ *(в случае если архитектура изменяться не будет, оставить на текущее)*

Бот должен быть добавлен в админ чат, выдача ему админ-прав необязательна, его команды не будут работать только в этом чате
Бот также должен быть добавлен в канал, в случае если вы используете эту проверку (в противном случае строки, отвечающие за это должны быть удалены из .env)

Архитектура подразумевает проксирование через внешний веб-сервер, например **Apache** или **Nginx**, поэтому необходимо настроить полное проксирование до `127.0.0.1:8022`, данный адрес при стандартной конфигурации будет работать только в локальной сети.
При необходимости можно настроить проксирование до сервиса **Grafana**, расположенного по адресу `127.0.0.1:8023`. В случае если в этом нет необходимости, объявление этого сервиса стоит удалить из `docker-compose.yaml`

## Запуск

`docker compose up -d --build` запустит все сервисы и приложение будет готово к работе, в случае если проксирование из пункта настройки было настроено.

## Credits

**Александр Замараев** - Backend разработчик, системный администратор, DevOps
- [Github](https://github.com/Zoom-Developer)
- [ВКонтакте](https://vk.com/zoom_developer)
- [Telegram](https://t.me/zoomdevs)

**Рамир Воробьёв** - Frontend разработчик, UI/UX дизайнер
- [Github](https://github.com/Ramchike)
- [ВКонтакте](https://vk.com/ramchike)
- [Telegram](https://t.me/ramchike)
